@host = http://localhost:8080

############################################################
# 1. Upload a text document
#    - This should create a Document in the DB.
#    - Check the response body for the real document ID and
#      use that in the later requests instead of 1.
############################################################
POST {{host}}/v1/api/documents
Content-Type: application/json

{
  "text": "This is a sample document for Cognitype. It has enough text to generate multiple chunks so we can test the backend flow end-to-end."
}


############################################################
# 2. Get chunks for a document
#    - This is the request you said was 500-ing:
#      GET /v1/api/chunks/1
#    - Change 1 to the real document ID from step 1.
############################################################
GET {{host}}/v1/api/documents/1

###

############################################################
# 3. Create a LENGTH-based typing session
#    - Uses your SessionController: POST /v1/api/sessions
#    - Assumes document with ID 1 exists; change as needed.
#    - mode: LENGTH, so chunkSize is used and timeSeconds can be null/omitted.
############################################################
POST {{host}}/v1/api/sessions
Content-Type: application/json

{
  "documentId": 1,
  "mode": "LENGTH",
  "chunkSize": 300,
  "timeSeconds": null,
  "difficulty": "MODERATE"
}

###

############################################################
# 3b. (Optional) Create a TIME-based typing session
#    - If you want to test TIME mode too.
############################################################
POST {{host}}/v1/api/sessions
Content-Type: application/json

{
  "documentId": 1,
  "mode": "TIME",
  "chunkSize": null,
  "timeSeconds": 60,
  "difficulty": "LIGHT"
}

###

############################################################
# 4. Get a session by ID
#    - Replace 1 with a real session ID from the previous
#      create-session response.
############################################################
GET {{host}}/v1/api/sessions/1

###

############################################################
# 5. Send a progress update for a session
#    - Hits: POST /v1/api/sessions/{sessionId}/progress
#    - typedCharsDelta: how many characters were typed since last update
#    - elapsedMsDelta: how many ms have passed since last update
############################################################
POST {{host}}/v1/api/sessions/1/progress
Content-Type: application/json

{
  "typedCharsDelta": 120,
  "elapsedMsDelta": 60000
}

###

############################################################
# 6. Complete a session
#    - Hits: POST /v1/api/sessions/{sessionId}/complete
#    - finalAccuracy: whatever the frontend computed
############################################################
POST {{host}}/v1/api/sessions/1/complete
Content-Type: application/json

{
  "finalAccuracy": 95.3
}

###

############################################################
# 7. Get the session again to verify itâ€™s completed
#    - completed should be true
#    - accuracy should match what you sent to /complete
############################################################
GET {{host}}/v1/api/sessions/1

###
